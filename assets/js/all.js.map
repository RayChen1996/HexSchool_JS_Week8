{"version":3,"sources":["all.js","config.js"],"names":["$","GetProductList","ShowMyCart","PData","CartArr","url","api_path","axios","get","then","response","data","products","status","RenderProductData","error","console","log","ReRenderMyCart","AddMyCart","PId","post","carts","PDArr","CartTbl","document","querySelector","myCartHTML_TH","myCartHTML","TotalPrice","finalTotal","length","ShowEmptyTbl","forEach","pItemObj","pIdx","product","images","title","origin_price","price","id","myCartHTML_Tfoot","innerHTML","DelSingleCart","pid","DelAllCart","AddPresertData","getElementById","val","CaegorySelectChange","addEventListener","e","target","value","FilterProduct","handleForm","preventDefault","qCategory","filter","el","category","ProductArr","HTMLStr","list_Product","item","index","token"],"mappings":"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","file":"all.js","sourcesContent":["\r\n$(function(){\r\n  GetProductList()\r\n  ShowMyCart()\r\n})\r\n\r\nlet PData = []\r\nlet CartArr = []\r\nfunction GetProductList(){\r\n  //https://livejs-api.hexschool.io/api/livejs/v1/customer/getproductlist/carts\r\n  const url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`\r\n  // console.log(`GetProductList  ${api_path}`)\r\n \r\n  axios.get(url)\r\n  .then(function (response) {\r\n    // 成功會回傳的內容\r\n    // console.log(response);\r\n    let data = response.data\r\n    PData = data.products\r\n    if(data.status)\r\n       RenderProductData(data.products)\r\n  })\r\n  .catch(function (error) {\r\n    // 失敗會回傳的內容\r\n    console.log(error);\r\n  })\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction ShowMyCart(){\r\n  // https://livejs-api.hexschool.io/api/livejs/v1/customer/raychen/carts\r\n  const url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`\r\n  axios.get(url)\r\n  .then(function (response) {\r\n    // 成功會回傳的內容\r\n    console.log('我的購物車');\r\n    console.log(response);\r\n    ReRenderMyCart(response.data)\r\n\r\n  \r\n  })\r\n  .catch(function (error) {\r\n    // 失敗會回傳的內容\r\n    console.log(error);\r\n  })  \r\n}\r\n\r\nfunction AddMyCart(PId){\r\n  console.log(`PId  ${PId}`)\r\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\r\n    //帶入的值會使用物件包裝\r\n    \"data\": {\r\n      \"productId\": PId,\r\n      \"quantity\": 1\r\n    }\r\n  })\r\n  .then(function (response) {\r\n    // 成功會回傳的內容\r\n    let data = response.data\r\n    CartArr = data.carts\r\n    if(data.status){\r\n      ReRenderMyCart(data)\r\n    }\r\n  })\r\n  .catch(function (error) {\r\n    // 失敗會回傳的內容\r\n    console.log(error);\r\n  });\r\n}\r\n\r\n//更新我的購物車列表\r\nfunction ReRenderMyCart(PDArr){\r\n  const CartTbl = document.querySelector('.shoppingCart-table')\r\n  //表頭\r\n  const myCartHTML_TH= `\r\n      <tr>\r\n        <th width=\"40%\">品項</th>\r\n        <th width=\"15%\">單價</th>\r\n        <th width=\"15%\">數量</th>\r\n        <th width=\"15%\">金額</th>\r\n        <th width=\"15%\"></th>\r\n      </tr>\r\n\r\n  `\r\n  \r\n  let myCartHTML = ``\r\n  let TotalPrice = PDArr.finalTotal\r\n  if(PDArr.carts.length==0){\r\n    myCartHTML += ShowEmptyTbl();\r\n  }else{\r\n    PDArr.carts.forEach((pItemObj,pIdx)=>{\r\n      \r\n      myCartHTML += `\r\n        <tr>\r\n          <td>\r\n              <div class=\"cardItem-title\">\r\n                  <img src=\"${pItemObj.product.images}\" alt=\"\">\r\n                  <p>${pItemObj.product.title}</p>\r\n              </div>\r\n          </td>\r\n          <td>NT$${pItemObj.product.origin_price}</td>\r\n          <td>1</td>\r\n          <td>NT$${pItemObj.product.price}</td>\r\n          <td class=\"discardBtn\">\r\n              <a onclick=DelSingleCart(\"${pItemObj.id}\") href=\"#javascript:;\" class=\"material-icons\">\r\n                  clear\r\n              </a>\r\n          </td>\r\n        </tr>  \r\n      `\r\n      \r\n    })    \r\n  }\r\n\r\n  \r\n  //表尾\r\n  const myCartHTML_Tfoot= `\r\n    <tr>\r\n      <td>\r\n          <a href=\"#javascript:;\" onclick='DelAllCart();' class=\"discardAllBtn\">刪除所有品項</a>\r\n      </td>\r\n      <td colspan=\"2\"></td>\r\n\r\n      <td>\r\n          <p>總金額</p>\r\n      </td>\r\n      <td>NT$${TotalPrice}</td>\r\n    </tr>\r\n\r\n  `\r\n  CartTbl.innerHTML = myCartHTML_TH + myCartHTML + myCartHTML_Tfoot\r\n}\r\n\r\n\r\n// 刪除購物車內特定產品\r\nfunction DelSingleCart(pid){\r\n  //'https://livejs-api.hexschool.io/api/livejs/v1/customer/raychen/carts/jw1jNknjVsKYPNyqYSWA'\r\n  // console.log(`delete at  ${pid}`)\r\n  //https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/jw1jNknjVsKYPNyqYSWA\r\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${pid}`).\r\n    then(function (response) {\r\n      console.log(response.data);\r\n      ReRenderMyCart(response.data);\r\n  })\r\n\r\n\r\n}\r\n\r\n//清除購物車內全部產品\r\nfunction DelAllCart(){\r\n  //https://livejs-api.hexschool.io/api/livejs/v1/customer/raychen/carts\r\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`).\r\n    then(function (response) {\r\n      console.log(response.data);\r\n      //重新渲染一次List  carts\r\n\r\n      ReRenderMyCart(response.data.carts);\r\n  })\r\n\r\n}\r\n\r\nfunction AddPresertData(){\r\n  // console.log($(\"#tradeWay\").val())\r\n  //https://livejs-api.hexschool.io/api/livejs/v1/customer/raychen/orders\r\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`, {\r\n    //帶入的值會使用物件包裝\r\n    \"data\": {\r\n      \"user\": {\r\n        \"name\": document.getElementById(\"customerName\"),\r\n        \"tel\": document.getElementById(\"customerPhone\"),\r\n        \"email\": document.getElementById(\"customerEmail\"),\r\n        \"address\": document.getElementById(\"customerAddress\"),\r\n        \"payment\": $(\"#tradeWay\").val()\r\n      }\r\n    }\r\n  })\r\n  .then(function (response) {\r\n    // 成功會回傳的內容\r\n    let data = response.data\r\n    console.log(response)\r\n\r\n  })\r\n  .catch(function (error) {\r\n    // 失敗會回傳的內容\r\n    console.log(error);\r\n  });\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nlet CaegorySelectChange = document.querySelector(\".productSelect\")\r\nCaegorySelectChange.addEventListener(\"change\",(e)=>{\r\n  console.log(e.target.value)\r\n  if(e.target.value==\"全部\"){\r\n    RenderProductData(PData)\r\n  }else{\r\n    RenderProductData(FilterProduct(e.target.value))\r\n  }\r\n})\r\n\r\n\r\n// let SubmitPresertOrrder = document.querySelector(\".orderInfo-btn\")\r\n// SubmitPresertOrrder.addEventListener(\"click\",()=>{\r\n//   AddPresertData()\r\n// })\r\n\r\n\r\nlet handleForm = document.querySelector(\".orderInfo-form\")\r\n\r\nhandleForm.addEventListener(\"submit\", (e) => {\r\n  e.preventDefault();\r\n  AddPresertData();\r\n\r\n  \r\n});\r\n\r\n\r\n\r\n\r\nfunction FilterProduct(qCategory){\r\n  return PData.filter((el)=>{\r\n    return el.category == qCategory\r\n  })\r\n}\r\n\r\nfunction RenderProductData(ProductArr){\r\n  console.log(ProductArr)\r\n  var HTMLStr = \"\"\r\n  let list_Product = document.querySelector('.productWrap')\r\n  ProductArr.forEach((item,index)=>{\r\n    HTMLStr += `\r\n    <li class=\"productCard\">\r\n                <h4 class=\"productType\">${item.category}</h4>\r\n                <img src=\"${item.images}\" alt=\"\">\r\n                <a href=\"#javascript:;\"  class=\"addCardBtn\" onclick=AddMyCart(\"${item.id}\") data-pid=\"${item.id}\" >加入購物車</a>\r\n                <h3>${item.title}</h3>\r\n                <del class=\"originPrice\">NT${item.origin_price}</del>\r\n                <p class=\"nowPrice\">NT${item.price}</p>\r\n            </li>\r\n    `\r\n  })\r\n  list_Product.innerHTML=HTMLStr\r\n}\r\n\r\n\r\n\r\n\r\n//秀空白td\r\nfunction ShowEmptyTbl(){\r\n  return  `\r\n    <tr>\r\n      <td colspan=5>\r\n          <div class=\"cardItem-EmptyData\">\r\n              空資料\r\n          </div>\r\n      </td>\r\n    </tr>  \r\n  `\r\n}","const api_path = 'raychen'\r\nconst token = \"zjRahQTiUTdZHg18y4XB5gv1Ort2\""]}